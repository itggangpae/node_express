<html>
    <head>
        <title>하나의 파일 업로드</title>
    </head>
    <body>
        <form id="form" action="/upload" method="post" enctype="multipart/form-data">
            <input type="file" name="image" id="image" multiple="multiple"/>
            <input type="text" name="title" id="title" />
            <button type="submit">업로드</button>
        </form>

        <script>
            document.getElementById('form').addEventListener('submit', (e) => {
              e.preventDefault();
              const formData = new FormData();
              var files = e.target.image.files;
              for(idx=0; idx < files.length; idx++){
                  formData.append('image', e.target.image.files[idx])
              }
              formData.append('title', e.target.title.value)

              var xhr = new XMLHttpRequest();
              xhr.open("POST" , "/multifileupload" , true);
              xhr.send(formData);
            });
        </script>
    </body>
</html>